{"version":3,"sources":["pages/home.tsx","util/storage-util.ts"],"names":["VantaWrapperLazy","lazy","SpotifySignInLazy","TopControlsLazy","SpotifyTopArtistsLazy","SpotifyTopTracksLazy","HomePage","useContext","AppContext","hasSpotifyToken","setHasSpotifyToken","favouritesType","useEffect","getWithExpiry","setWithExpiry","key","value","ttlSeconds","item","expiry","Date","getTime","localStorage","setItem","JSON","stringify","itemStorage","getItem","parse","removeItem"],"mappings":"iIAAA,2CAIMA,EAAmBC,gBAAK,kBAAM,wDAC9BC,EAAoBD,gBACxB,kBAAM,uDAEFE,EAAkBF,gBACtB,kBAAM,iCAEFG,EAAwBH,gBAC5B,kBAAM,8DAEFI,EAAuBJ,gBAC3B,kBAAM,uDA6BOK,UA1BE,WAAO,IAAD,EAC2CC,qBAC9DC,KADMC,EADa,EACbA,gBAAiBC,EADJ,EACIA,mBAAoBC,EADxB,EACwBA,eAO7C,OAJAC,qBAAU,WACRF,EAAoD,MAAjCG,YAAc,mBAChC,CAACH,IAGF,oCACGD,EACC,kBAACT,EAAD,KACE,kBAACG,EAAD,MACoB,WAAnBQ,EACC,kBAACN,EAAD,MAEA,kBAACD,EAAD,OAIJ,kBAACF,EAAD,S,gCCtCR,oEAAO,IAAMY,EAAgB,SAACC,EAAaC,EAAYC,GACrD,IAEMC,EAAO,CACXF,MAAOA,EACPG,QAJU,IAAIC,MAIFC,UAAyB,IAAbJ,GAG1BK,aAAaC,QAAQR,EAAKS,KAAKC,UAAUP,KAG9BL,EAAgB,SAACE,GAC5B,IAAMW,EAAcJ,aAAaK,QAAQZ,GACzC,IAAKW,EACH,OAAO,KAGT,IAAMR,EAAOM,KAAKI,MAAMF,GAGxB,OAFY,IAAIN,MAERC,UAAYH,EAAKC,QACvBG,aAAaO,WAAWd,GACjB,MAGFG,EAAKF","file":"static/js/10.089660ba.chunk.js","sourcesContent":["import React, { lazy, useContext, useEffect } from \"react\";\nimport { AppContext } from \"../AppContext\";\nimport { getWithExpiry } from \"../util/storage-util\";\n\nconst VantaWrapperLazy = lazy(() => import(\"../components/vanta/vanta\"));\nconst SpotifySignInLazy = lazy(\n  () => import(\"../components/spotify-sign-in/spotify-sign-in\")\n);\nconst TopControlsLazy = lazy(\n  () => import(\"../components/top-controls/top-controls\")\n);\nconst SpotifyTopArtistsLazy = lazy(\n  () => import(\"../components/spotify-top/spotify-top-artists\")\n);\nconst SpotifyTopTracksLazy = lazy(\n  () => import(\"../components/spotify-top/spotify-top-tracks\")\n);\n\nconst HomePage = () => {\n  const { hasSpotifyToken, setHasSpotifyToken, favouritesType } = useContext(\n    AppContext\n  );\n  useEffect(() => {\n    setHasSpotifyToken(getWithExpiry(\"spotifyToken\") != null);\n  }, [setHasSpotifyToken]);\n\n  return (\n    <>\n      {hasSpotifyToken ? (\n        <VantaWrapperLazy>\n          <TopControlsLazy />\n          {favouritesType === \"tracks\" ? (\n            <SpotifyTopTracksLazy />\n          ) : (\n            <SpotifyTopArtistsLazy />\n          )}\n        </VantaWrapperLazy>\n      ) : (\n        <SpotifySignInLazy />\n      )}\n    </>\n  );\n};\n\nexport default HomePage;\n","export const setWithExpiry = (key: string, value: any, ttlSeconds: number) => {\n  const now = new Date();\n\n  const item = {\n    value: value,\n    expiry: now.getTime() + ttlSeconds * 1000,\n  };\n\n  localStorage.setItem(key, JSON.stringify(item));\n};\n\nexport const getWithExpiry = (key: string) => {\n  const itemStorage = localStorage.getItem(key);\n  if (!itemStorage) {\n    return null;\n  }\n\n  const item = JSON.parse(itemStorage);\n  const now = new Date();\n\n  if (now.getTime() > item.expiry) {\n    localStorage.removeItem(key);\n    return null;\n  }\n\n  return item.value;\n};\n"],"sourceRoot":""}