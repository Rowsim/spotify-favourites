(this["webpackJsonpspotify-favourites"]=this["webpackJsonpspotify-favourites"]||[]).push([[5],{265:function(e,t,n){"use strict";n.r(t);var r=n(9),o=n(0),c=n.n(o),a=n(51),i=n(266),u=n.n(i);n(267);t.default=function(){var e=Object(o.useState)(""),t=Object(r.a)(e,2),n=t[0],i=t[1];return Object(o.useEffect)((function(){Object(a.d)().then(i)}),[]),c.a.createElement("div",{className:"spotify-sign-in"},c.a.createElement("a",{href:n,className:"spotify-sign-in__link"},c.a.createElement("div",null,"Connect Spotify"),c.a.createElement("img",{src:u.a,alt:"spotify-logo"})))}},266:function(e,t,n){e.exports=n.p+"static/media/spotify-logo.e359ad39.svg"},267:function(e,t,n){},51:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return d})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return b}));var r,o=n(52),c=n.n(o),a=n(60),i=n(50),u=n(66),s=n(100),f=n(101),p="https://rowsim.github.io/spotify-favourites/callback",l="a3c9a895bbe94102a08574ba4f4adc9e";!function(e){e.AUTH="authorization_code",e.REFRESH="refresh_token"}(r||(r={}));var d=function(){var e=Object(a.a)(c.a.mark((function e(){var t,n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u({length:48,type:"url-safe"}),localStorage.setItem("verifierCode",t),e.t0=m,e.next=5,s(t);case 5:return e.t1=e.sent,n=(0,e.t0)(e.t1),r=u({length:10,type:"url-safe"}),localStorage.setItem("stateCode",r),e.abrupt("return","https://accounts.spotify.com/authorize?response_type=code&client_id=".concat(l,"&redirect_uri=").concat(p,"&code_challenge_method=S256&code_challenge=").concat(n,"&state=").concat(r,"&scope=").concat("user-top-read"));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(i.a)("spotifyToken");return e||(b(r.REFRESH)?localStorage.getItem("spotifyRefreshToken"):null)},b=function(){var e=Object(a.a)(c.a.mark((function e(t,n,o){var a,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==r.REFRESH){e.next=5;break}return a={grant_type:t,refresh_token:localStorage.getItem("spotifyRefreshToken"),client_id:l},e.abrupt("return",g(a));case 5:if(localStorage.getItem("stateCode")!==n){e.next=10;break}return i={client_id:l,grant_type:t,code:o,redirect_uri:p,code_verifier:localStorage.getItem("verifierCode")},e.next=9,g(i);case 9:return e.abrupt("return",e.sent);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),g=function(){var e=Object(a.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://accounts.spotify.com/api/token",{method:"POST",body:y(t),headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 2:return n=e.sent,e.next=5,n.json();case 5:if(!(r=e.sent).access_token){e.next=10;break}return Object(i.b)("spotifyToken",r.access_token,r.expires_in),localStorage.setItem("spotifyRefreshToken",r.refresh_token),e.abrupt("return",!0);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(e){return e.toString(f).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},y=function(e){return Object.keys(e).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&")}},68:function(e,t){},69:function(e,t){},75:function(e,t){},76:function(e,t){},81:function(e,t){},82:function(e,t){},84:function(e,t){},86:function(e,t){},88:function(e,t){},91:function(e,t){},92:function(e,t){},97:function(e,t){},99:function(e,t){}}]);
//# sourceMappingURL=5.11a91395.chunk.js.map