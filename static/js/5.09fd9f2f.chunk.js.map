{"version":3,"sources":["services/spotify-service.ts","components/title/styled-title.tsx","assets/images/not-found.png","assets/images/play.svg","components/spotify-top/spotify-top-tracks.tsx","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js","services/spotify-auth.ts"],"names":["SPOTIFY_API_URL","getUserTopArtists","timeRange","limit","a","spotifyToken","checkSpotifyTokenAndRefresh","console","log","fetch","method","headers","Authorization","userTopArtistsResults","json","Promise","reject","getUserTopTracks","userTopTracksResponse","StyledTitle","styled","h1","props","fontSize","theme","fontAlt","primary","module","exports","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","createElement","d","_ref3","_ref4","_ref5","_ref6","_ref7","_ref8","_ref9","_ref10","_ref11","_ref12","_ref13","_ref14","_ref15","_ref16","_ref17","_ref","svgRef","title","x","y","viewBox","style","enableBackground","xmlSpace","ref","ForwardRef","forwardRef","TrackCard","track","position","artistNames","getTrackArtistNames","artists","trackImageUrl","getTrackingImageUrl","className","src","notFoundImg","alt","name","map","album","images","url","names","forEach","artist","push","SpotifyTopTracks","useContext","AppContext","topTracks","setTopTracks","selectedTimeRange","useState","prevSelectedTimeRange","saveSelectedTimeRange","useEffect","then","result","items","index","id","_taggedTemplateLiteral","strings","raw","slice","freeze","defineProperties","value","GrantType","cryptoRandomString","require","sha256","Base64","REDIRECT_URI","process","CLIENT_ID","spotifyAuthRequestUri","verifierCode","type","localStorage","setItem","base64URLEncode","challengeCode","stateCode","token","getWithExpiry","getUserAccessToken","REFRESH","getItem","grantType","stateResponse","authCode","spotifyRefreshTokenRequest","grant_type","refresh_token","client_id","fetchTokenFromSpotify","spotifyTokenRequest","code","redirect_uri","code_verifier","body","encodeFormData","spotifyTokens","tokens","access_token","setWithExpiry","expires_in","hash","toString","replace","data","encodeURIComponent","join"],"mappings":"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","file":"static/js/5.09fd9f2f.chunk.js","sourcesContent":["import { checkSpotifyTokenAndRefresh } from \"./spotify-auth\";\nimport { Artist, Track } from \"./spotify-types\";\n\nconst SPOTIFY_API_URL = \"https://api.spotify.com/v1\";\n\nexport const getUserTopArtists = async (\n  timeRange: string,\n  limit?: number\n): Promise<UserTopArtists> => {\n  const spotifyToken = checkSpotifyTokenAndRefresh();\n  if (spotifyToken) {\n    console.log(`GET ${SPOTIFY_API_URL}/me/top/artists`)\n    const userTopArtistsResults = await fetch(\n      `${SPOTIFY_API_URL}/me/top/artists?time_range=${timeRange}${\n        limit ? `&limit=${limit}` : \"\"\n      }`,\n      {\n        method: \"GET\",\n        headers: {\n          Authorization: `Bearer ${spotifyToken}`,\n        },\n      }\n    );\n\n    return userTopArtistsResults.json();\n  }\n\n  return Promise.reject(\"Invalid spotify auth token :(\");\n};\n\nexport const getUserTopTracks = async (\n  timeRange: string,\n  limit?: number\n): Promise<UserTopTracks> => {\n  const spotifyToken = checkSpotifyTokenAndRefresh();\n  if (spotifyToken) {\n    console.log(`GET ${SPOTIFY_API_URL}/me/top/tracks`)\n    const userTopTracksResponse = await fetch(\n      `${SPOTIFY_API_URL}/me/top/tracks?time_range=${timeRange}${\n        limit ? `&limit=${limit}` : \"\"\n      }`,\n      {\n        method: \"GET\",\n        headers: {\n          Authorization: `Bearer ${spotifyToken}`,\n        },\n      }\n    );\n\n    return userTopTracksResponse.json();\n  }\n\n  return Promise.reject(\"Invalid spotify auth token :(\");\n};\n\ninterface UserTopArtists {\n  items: Array<Artist>;\n}\n\ninterface UserTopTracks {\n  items: Array<Track>;\n}\n","import styled from \"styled-components\";\n\nexport const StyledTitle = styled.h1<{ fontSize?: string }>`\n  font-size: ${(props) => (props.fontSize ? props.fontSize : \"60px\")};\n  font-family: ${(props) => props.theme.fontAlt};\n  color: ${(props) => props.theme.primary};\n  font-weight: unset;\n  cursor: default;\n  @media only screen and (max-width: 768px) {\n    font-size: 34px;\n  }\n`;\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAIAAAD2HxkiAAAAA3NCSVQICAjb4U/gAAAXS0lEQVR4nO3dWX/aSLoG8Le0ILEYiLFZvCTT8/0/z5kzN2emu6c7nQlJbDAgAVKdi4JyURICE+AF8/x/fWELQYRbD7UX4n//558EAHwc7gsAuHQIIQAzhBCAGUIIwAwhBGCGEAIwQwgBmCGEAMwQQgBmCCEAM4QQgBlCCMAMIQRghhACMEMIAZghhADMEEIAZgghADOEEIAZQgjADCEEYIYQAjBDCAGYIYQAzBBCAGYIIQAzhBCAGUIIwAwhBGCGEAIwQwgBmCGEAMwQQgBmCCEAM4QQgBlCCMAMIQRghhACMEMIAZghhADMEEIAZgghADOEEIAZQgjADCEEYIYQAjBDCAGYIYQAzBBCAGYIIQAzhBCAGUIIwAwhBGCGEAIwQwgBmCGEAMwQQgBmCCEAM4QQgBlCCMAMIQRghhACMEMIAZghhADMEEIAZgghADOEEIAZQgjADCEEYIYQAjBDCAGYIYQAzBBCAGYIIQAzhBCAGUIIwAwhBGCGEAIwQwgBmCGEAMwQQgBmCCEAM4QQgBlCCMAMIQRghhACMEMIAZghhADMEEIAZgghADOEEIAZQgjADCEEYIYQAjBDCAGYIYQAzBBCAGYIIQAzhPBCSSkLfrVPFiTFgS/ogiGEF0oIYQZPCEHroygkCfl6GuwXQniJpJRCCCtR6iCtKSTVQ2maWsfh5yGEl8gqBslIoHrUzKeZTP2QeT78JITwEuUWYvqglNIs8SzqIcfBnbM3HvcFAINsIeY4jpRS9b5IItd1fd93XZeIkiSJ43jxRPlaL0VJuC8I4SWS4rVZqH7wS6VSyQuCIAiCUqlUKpV0xqSUUsrB4GUwGEwmE5mkKrG8b+E9QQgvUaVScV1XRy4I/NzTzP6bZrPebNafngb9fn8+nTmOg8JwXxDC4zNbUykRSSl12bKxw8PqQVnUIClVx7NPl4IqlYrv+6VSqVwu+77r+/mRyzL/IfVDs1kvl4Nff/1dJkjg3iCEx2f3eQghdKmSGyQlO64gpZQy1U8RQqjy7TVyged5Rf+LzeEH81/JfUgplUoPDw+///rbm94zFEAID6I4SPpXPVSgIqSiKIRYlpaLgOmMpbQoM9WR1SplEASLrpQtL8DMm5lkfW3mafpkIUS5HNSbjcHT817+VoAQ7l9Bp0V2fNz8+bVSKlJ1cqJi6Thpmqr+Et/3g4XXyGVfM1uiZgtSK2/Z0JpPMeMqhLi5uUYI9wUh3L+3NpZ0GajLHCLyPM/3/Vqt4vu+53mVSoW2GyJfbTFKkSnZCsxmyWw2G4/H0+l0Pp+Px2Miqtfr3W5bDQy+9qb6frkaTkbRm94p5EIID0gnam3lUCyKu3Kl7DhOtVp1XbdUKlUq4boX3OECcue4SEnzeTKdTqMomk6nKnvCKsKlFEIMnwdxHP/yyyfrNavVKkK4FwjhAanGm+M4UhAtW3eO4+gqZRiWPM8LgoAKu2SK/4k1GbM7S2ezWRzHKmzJLI2iiIyPCSISeU1W9UMcx6PRpFotm8dLpdJOfxWwIYSH5ThOGIau7wS6Jef76/K2Q6f/utqmytt0OlcF3XQ6TdNUDe654nWo/TWBmUsy+4SIKIoiHUIFIdwXhLDIxvokEaW08tDqoJzv+3bfybqu/92oC5uMovl8HsdxFEVxHM/n8+yZDglKpUP21G3zqtZdp5A0i6fWCUEQpCQdWil+MZlmBwhhEbOgoMyouuO5YRh6nlcqlSqVijkOXhDaneOnX3M8jmaz2Ww2G41G8/l8NpvpxX6HC8B0aoeQiMrlcjxZNAvN0UV4E4RwM333q+pco9Go1atq5pd1mv55+6Sta9QpavK0MpvNJpNYLumhRSISdNgASCmjKEpTstZOeJ4XLT+YMIttZwhhESlISNKlXxiGvfvuumlf64bm7NdcTZ3ZqEvTNIqiKJrOpzMVvCRJrJnWUo0ckpCpJEEOqZH9tOBf/Hnq00e1Ks3jYRiOhi/GHAPYBUK4ga58NpvN7l2n+GTrRswOzZs3a5Ik0+l8NBrNZrP5fD6ZTMy+k0URtzz/tQ68nDltvHiaffG9E0JMp1PPWxk7CcMQ2ft5CGERIYmEIKLGh2a3t0hgcfm2ThzP0jQdjUbmODilK5PIHPHad7Lu1dY9dNAwqI+AyWRiDWD6vq+LR/3RgGbhWyGERdQt5fpeu32jjmSbcFZ1kYjSNJ3P59PpNI7jaDyZzWZxPLPPXP4DVFiImU+xpr+Y09MO/XdQ9NJeLQh8q2RGAneAEBZRt9Tt7a36sM/GQN18cRyrsTg1JqduVqvH0oxottZqZcmcLa0vQxgTu/XJRyt/pJS5Ix+e581mM30Ohih2gBBuIFyn0bha/GyEZzKJv3//HkXRfKpuwUU8iMhMmDXIQWvqjdaNu75umbMMKvv0vZOCJJGaZEOrH0ZeyZ9Op0K4RCREmqYpOcKe/gaFEMIiUsowCMxf1c33/Dz8/PkzLYs7KWVxi0wYy5SOX438eUKSJErTNEkS13XNdmy1Wp2MxvrTQQhBZ/O2TgX2zCoihKhWq7Q6fSRJki9fvugTlslMs8WUZjYg9ZFDX/xeOWpmjGrcakIIz3PIsWvO8CYIYRGrbabEcZymqZCqaSbfuvnf2fbpO5TKbN9MqVTSjd7sX8Nq6B7hKs8RQlgkNzC+7wv52gmh+y0LbjLz0f3OHT2iVAgxm82stxmGr4MWjuNZG5aaLeEzfMtHgjbhBro3QlMzZlTXvMqhavIVdAxmu1WXZ57Lh2BKRFLQZDLJdu2WSqXl9O78mWvn2Aw+JoRwAzVx2SzrhBCVSmU8Hpt31caPeX1yEASu6y6qcGdSNgi5uFTXzbniarUcex4t/0pRNJYJ0Wp3FKE6uh5CuIEKoTVqlzt9tOAmqzevarVatVp9d7vHp0ROp9MhayqPpMk4Gg6Hg8FgPp9jJk0xhHADmaRxPDO3xxVCeCVXze02J09bhBCJTKvVaq/XUaF9j3fh62fKSl1AULkalqvhTbvV7/e/f3+id/je9+adfTDvn5q4bB1U2y4RkTl5xSKlbLfbj4/3OoHvvjQw2roLjuPc3t4+PDzkVgFWm8eXCyHcLNs3o/vlafn9RNkpL7e3t9fXTXN+aXa08Nxl33W2bSyEqNUq948P1hYEdPiVH+cCIdxASpktCV3X1X2haZpm50yWy+Xrmw/rEvhuomhOnSk+s1IJ2+0b87R3Xy/YHtqEm2VDKIQol8uT0Vga68rNHHbvepTZPFf9Op1OkyQhcoQQUnUjviNqy0bK6y5utVqDp2Ecx2Y/M8Mlnh6EcIPcNiEta6HZSaFEdNWo+75rLfxL07Tf7z8/D1VvofXoO6AbeGoD1U6noze50pFrtVp//vknEWGxhQkh3CxN09lsZg1LhGFpNCRaWYi06Cmt12tkVdVS8duvv0dRJIQQkgSRICHWbHx2jqSUJBbLJ2SSjl9G/3r5v7/9/ZdSySNjaKdWq6mPrdwN/C8W2oSbqela1sFgdXWF8Uhq9J0unv7169c4jvX0mrxnnSVrfZY5M0ZK+ccff1gnO64Iw1DNVXg3DeOfhxBuJiRNJisTl6WUpVJJfd/t62mLVXROtjv+6emJsQqqJ1gf6JXXieN4MpmsHBIkXEftK4BmoYYQbsVqFqoJk5T59pWCV2D5yDdvdNzuJwshLKLLrtwOUlUj1RO4i1/ncBdZwAweKn4nCyEsosu3KIqyczvUkL065/QnhTLWhKHYqd86p0DFTw0tmMeDINC9C2dxt53FRV4ghHADPRyf3WvMrI6exf2NZuFpQgg30MPxi+16DWrk8Iy6Pc7o8+KiYLB+MyGEJJpOV0pCKWUYntMX9KkEqk7d7FYxwAgh3IqQtNxfdHlECCIKyqUomp7wNpuOEDIl6fv+zc11o9HQDzw/P3/9+i2ZzQmb9nJDCDfQQ232uPPy3uW4qO2lUlJYDj9+tFf0NRqNWq3+n99+j6JIb2XPdZUX7sTvIX56GYTa+lYfV7W7arV64gWI4zhqTW123ozrio8fP+odq/iu8dLhT1/EWgRoNqXUcbWwkO36NpFS1ut1tTuTuaKK9Fw2kX748GHjZAM4qNO9gU6B1ZeYXWIfBMEpl4SO41Rq1ewmhbR8a+oE9JryQgi3om5ca6hQSlkul0/53pVSet7aLbGXUnMfezg+hPANzK8lomVhYq5pOjVSkJQ5xSBWMJwUhPANdJvQXDzhed7JFoZS5nx7BK3GL4r0xqq4GXjg717ESlc6l0li561aLavq3ElRV+6Q+PHjR97jqT7nx7fvQhI6ZhghhEWyFbZsweJ5xxtrtfs210wcNwcwZ/H08+cvmVMWG+R8/vxZbRrgOM7723XqXCCEG1h3uRlClQFzD9JD0wN6Ysmc6aKux2z1qTQ+/3j68z+f1SCnPjlJks+fvzw/D/UoKJqIXDBjZgNrWwpzs5nFzLUgcByH0mPkUG80LIzvgdJXaO1rqs5PkkQIMRwOh8NhrVYrlwMpKIqmo9FISkmppOVYxcm2bN89hPBtskOFjuO4rpuk9kKnQ7C2q/j06dPT09OPHz9ydxkmo3xTB19eXl5eXvRL6YJUrxQ5wluALFRHNzP3R7PahCoVamnCEZiFVbvdDsql1u11WAnk6i7D+hy9HWM2YLoWav4KLBDCIlYNTZUYqzusCVr9ttqD0omqXtU+tJpE5Hne/f2953nrirKCLd50/w0qorwQwiLZjZLSNLWG7OnoHaSe5/V6PX0Bvu92u93ceWfF6RLYjv40IITbUneqQ2I+TcwjRKR6Ow7KLNDuHnrmnGwip1avtm5vzJOllOSIgjIwd0Jp7g9waAjhm2W3PzxCm1AvdGh3O6r2a5VyrdaHcrVCZo9Lsnb8PVts6l91KxF11KNBCN8su7p37wuackfhhRC1+lWz2dC/Wo/e3/d831dXUrxE0OxqMscV9UPnsn/c+4AQvpnqILXWyO69b0ZHSOfEK/ndblvFJ7tCl1QOH+9UUVa8NMmMnPn9ilJQ9ar2+Omj7muFI0AI30Ddu2pBkzkeIKXcbwh15VPHIyX58PCgvkol+68vZoo6ThAEvfs782oL3os5yq/+oTAM7+66lUp4025lv1gXDgQhfAN9U04mE2ugwvf9PdbfdOmn4iEF9Xo982vGaLU0M8u9RuOq3mzQpp6V7PihqtCqErjVatXrtZRQIz0GhHAX0+nUusX1btx7IdzXuigRXV1dNZt1K365bTml3b7ZsmQ20/vp0ye1k6o60ul0lr+iPDwshHBbZkGXtxu3T/tjTr/Wo4L6ITM5ucl3XffuobdNX5EuDHu9Xmn5FhZNUM9TO0ShUnpoCOG2zHtxNMrpIBV5Xz67cbg8/7hcPJqSvH+8M9OUnZuWy/f97l3n9TIE6W9TNC9J/fyhdV1vXlGmyycI/Hb3VopjTIu9ZAjhLvRQoXlDh2Foriqiwilj+jQrEiu/Cmq32ztsn6Ersbe3t+pXh4SQZH1VMC2HPdrtG/OIWdg2Go16vZ598eLeV3gThHAXujpq3tC+75sTwTYmkIxNTfWzzIKuVqtdXzettt829GVc33woV0P9qzm/VCx2EA+73Xb26eZbu7u70y1Mnc9t3h1sCSHcURzPaDUb1WqVjD6VbeRGS93ivu/3eov6pArPNuN+2bbiw8ODV/KzxZeU0vHcu7uu67q5r2C6e+gJ97UURfz2CyHchZCLIXvzdqzX60E51JtEvOlOtcpDIrp7uFfxIMqpRuY+nfJqiWrgQb++PtNxnMfHx+yEOyuo6gfP8x4e7nYok2EbCOGOFivTVz0+3t/c3FgHt7xrzZZYu3urv/JJz4DZ5hWyZwohwjDs9LrmQynJTq9rfquUOe5vVVnVkUql0rq9llKqCQMoDPcIIdzRaPiS3aHMdV0zhLmpKCaEuLq6+vDhg47uNhtPbPyHms16vdnQOW+3b+r1Wraz1JqtZg1I3tzc1Ot1tV8GysM9Qgh3lCRJv9/PHrfu6e1vVnWv+77f7Xat5258ndw6pKXdvqlUKmmaNpvNVquln1XwXKsflYi63fbRthG4HAjh7p6+P4/Hr1vO5N792xeDalTw7qHneDkr+rbpaM2eaZZ1ruv27ruVWrndvbWelfvcrEVfzkNPN1atC1j+BXBTvQ3+XrsTQvzxxx96ob0523P7FzFP7nQ6e58ITka0fN9X34X2M68WhqEZY03v/qZ2FobtIYS7S9M0mc1/+/fv/f5383h2jvU6ZhusWq1eXzcPcZ3bXMmbXF0t5ojT6moMq3ILW8KWh7uQUhC97ibY/+/X4fOgXq9XatVy+XWCy8Y+fd0b6Xne3cMdbTHJZqerfU3Ivr4PtNfrRNF4Fs+llNYeU+g4fSuUhLsQYmWHTyFEHMf9fv+3f//6j3/8U5+2Te+oevT+8U6ddYg72HzNn0mgORdPSvn4+CgF6RneKAN3hhDuThhfcPs6CE5vLhNuO+1Db5qoPy9+JifW547neY+Pj3rNIbYP3hlCuCO5XMxOmyqcxa+jJoju99qytuz/3P51lEolvL1tyYOV4RcCIdyRMHaw3mZCWS7f9621gvu7wP3LvbxWq3V1dXX8i3lP0DHzU6yMretWseaC6bs5KJe+P33bvjf11AjpEJHveusahGs+g163ljrwBZ4HhHCf1pV75nHzS1qGzy8jZ2xOWDnHSp0wviJq5bi0FxALY6mX+jsIfBcNqqPHYS0y1HetVYCc6b2oi7W8ks3euNH8I9AZFv6HgBDuWe5dpTdQ0nee3rzwfdDdVHrmmtVxZQ0kWouqjn69p+XS3/8hZL/Xvtm0+z+tBFrVtgNd2IHkzf9OHcepVCpqtZSZQLUIY82zLhRCuGdCCL1Pvr69rq+vra1iNq5XOCNmx5Iu+hzHaXc71plJksRxnF0CduEQwn1S0RoMBtZcGeHSx789Nq8bwnXIESlJcsQ72M5zsYnb8j/11qSgq0b90y8f9TaQ+hPn5eUF5V4Wekf3SbV2hsPh7W3L8zxrvli73e50OtPpPEmS5b24YfOYk7fyIS6EEGLlGwF0H4z6od/vqw4Zq5/m2Fd9YhDCPRNCUCr/+vPL46eH5bFU3azqtiuVvMv5s5ujo/3+9/k0EavHkUBCdfRAxuPxly9fl79dyldSrxmlICIaDke5GxEAIYSHoOpaP378+O9/++YWFfpRvks7LHN5pGkwePnrr7+Ofz3n4lLqRcchl9+Sq8biv337Fsdxp3Or9mUxB6kvRJqm/f737/1vl/W23wgh3CcVP9IzuYQYDV/+9TK6atSurq4WuwO/07vRGpEfj8eDwWA4HKXzBNNEiyGE+5Q7NYSIBoOXweCFlruA6tHqdxZI9dETRZFaXuI4DqX29vuQhRAeijmtWSyLAZmm8STSc5ffTflgzsyWaUpEruOkycrbfH8fOvuCEB5K7q5H5rTJd5NAawKaWc6biySQwHXQO3ool3PPFSzbR+m3DYQQgBlCCMAMIQRghhACMEMIAZghhADMEEIAZgghADOEEIAZQgjADCEEYIYQAjBDCAGYIYQAzBBCAGYIIQAzhBCAGUIIwAwhBGCGEAIwQwgBmCGEAMwQQgBmCCEAM4QQgBlCCMAMIQRghhACMEMIAZghhADMEEIAZgghADOEEIAZQgjADCEEYIYQAjBDCAGYIYQAzBBCAGYIIQAzhBCAGUIIwAwhBGCGEAIwQwgBmCGEAMwQQgBmCCEAM4QQgBlCCMAMIQRghhACMEMIAZghhADMEEIAZgghADOEEIAZQgjADCEEYIYQAjBDCAGYIYQAzBBCAGYIIQAzhBCAGUIIwAwhBGCGEAIwQwgBmCGEAMwQQgBmCCEAM4QQgBlCCMAMIQRghhACMEMIAZghhADMEEIAZgghADOEEIAZQgjADCEEYIYQAjBDCAGYIYQAzBBCAGYIIQAzhBCAGUIIwAwhBGCGEAIwQwgBmCGEAMwQQgBmCCEAs/8H8XO8NGk0ug4AAAAASUVORK5CYII=\"","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M238.933,0C106.974,0,0,106.974,0,238.933s106.974,238.933,238.933,238.933s238.933-106.974,238.933-238.933 C477.726,107.033,370.834,0.141,238.933,0z M339.557,246.546c-1.654,3.318-4.343,6.008-7.662,7.662v0.085L195.362,322.56 c-8.432,4.213-18.682,0.794-22.896-7.638c-1.198-2.397-1.815-5.043-1.8-7.722V170.667c-0.004-9.426,7.633-17.07,17.059-17.075 c2.651-0.001,5.266,0.615,7.637,1.8l136.533,68.267C340.331,227.863,343.762,238.11,339.557,246.546z\"\n})));\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref6 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref7 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref8 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref9 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref10 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref11 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref12 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref13 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref14 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref15 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref16 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref17 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar SvgPlay = function SvgPlay(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 477.867 477.867\",\n    style: {\n      enableBackground: \"new 0 0 477.867 477.867\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12, _ref13, _ref14, _ref15, _ref16, _ref17);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgPlay, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/play.31ca44be.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useContext, useEffect, useState } from \"react\";\nimport { Artist, Track } from \"../../services/spotify-types\";\nimport { StyledTitle } from \"../title/styled-title\";\nimport { ReactComponent as PlaySvg } from \"../../assets/images/play.svg\";\nimport { getUserTopTracks } from \"../../services/spotify-service\";\nimport { AppContext } from \"../../AppContext\";\nimport notFoundImg from \"../../assets/images/not-found.png\";\nimport \"./spotify-top.scss\";\n\nconst SpotifyTopTracks = () => {\n  const { topTracks, setTopTracks, selectedTimeRange } = useContext(AppContext);\n  const [prevSelectedTimeRange, saveSelectedTimeRange] = useState(\n    selectedTimeRange\n  );\n  \n  useEffect(() => {\n    saveSelectedTimeRange(selectedTimeRange);\n\n    if (\n      !topTracks ||\n      topTracks.length < 1 ||\n      prevSelectedTimeRange !== selectedTimeRange\n    )\n      getUserTopTracks(`${selectedTimeRange}_term`).then((result) => {\n        setTopTracks(result.items);\n      });\n  }, [prevSelectedTimeRange, selectedTimeRange, setTopTracks, topTracks]);\n\n  return (\n    <div className=\"spotify-top spotify-top--tracks fade-in\">\n      <StyledTitle fontSize=\"60px\">Your top tracks</StyledTitle>\n      <div className=\"spotify-top__tracks\">\n        {topTracks &&\n          topTracks.map((track, index) => (\n            <TrackCard key={track.id} track={track} position={index + 1} />\n          ))}\n      </div>\n    </div>\n  );\n};\n\nconst TrackCard = ({ track, position }: TrackCardProps) => {\n  const artistNames: string[] = getTrackArtistNames(track.artists);\n  const trackImageUrl: string = getTrackingImageUrl(track);\n  const className = \"spotify-top__tracks\";\n  return (\n    <div className={`${className}__card`}>\n      <div className={`${className}__card__img`}>\n        <img\n          src={trackImageUrl ? trackImageUrl : notFoundImg}\n          alt={track.name}\n        />\n        <div className={`${className}__card__img__number`}>{position}</div>\n      </div>\n      <div className={`${className}__card__title`}>{track.name}</div>\n      <div className={`${className}__card__artists`}>\n        {artistNames.map((name, i) => {\n          if (i + 1 >= artistNames.length)\n            return (\n              <div\n                key={name + i}\n                className={`${className}__card__artists__name`}\n              >\n                {name}\n              </div>\n            );\n          return (\n            <div key={name + i} className={`${className}__card__artists__name`}>\n              {`${name},`}\n            </div>\n          );\n        })}\n      </div>\n      <div className={`${className}__card__play`}>\n        <PlaySvg />\n      </div>\n    </div>\n  );\n};\n\nconst getTrackingImageUrl = (track: Track) => {\n  if (!track.album || !track.album.images) return \"\";\n  return track.album.images[0].url;\n};\n\nconst getTrackArtistNames = (artists: Artist[]) => {\n  if (!artists) return [];\n\n  const names: string[] = [];\n  artists.forEach((artist, i) => {\n    if (i <= 3) names.push(artist.name);\n    if (i === 5) names.push(\"...\");\n  });\n\n  return names;\n};\n\ninterface TrackCardProps {\n  track: Track;\n  position: number;\n}\n\nexport default SpotifyTopTracks;\n","export default function _taggedTemplateLiteral(strings, raw) {\n  if (!raw) {\n    raw = strings.slice(0);\n  }\n\n  return Object.freeze(Object.defineProperties(strings, {\n    raw: {\n      value: Object.freeze(raw)\n    }\n  }));\n}","import { getWithExpiry, setWithExpiry } from \"../util/storage-util\";\n\nconst cryptoRandomString = require(\"crypto-random-string\");\nconst sha256 = require(\"crypto-js/sha256\");\nconst Base64 = require(\"crypto-js/enc-base64\");\n\nconst REDIRECT_URI =\n  process.env.REACT_APP_AUTH_REDIRECT_URI || \"http://localhost:3000/callback\";\nconst CLIENT_ID = \"a3c9a895bbe94102a08574ba4f4adc9e\";\nconst REQUEST_SCOPES = \"user-top-read\";\n\nexport enum GrantType {\n  AUTH = \"authorization_code\",\n  REFRESH = \"refresh_token\",\n}\n\nexport const spotifyAuthRequestUri = async () => {\n  const verifierCode = cryptoRandomString({ length: 48, type: \"url-safe\" });\n  localStorage.setItem(\"verifierCode\", verifierCode);\n\n  const challengeCode = base64URLEncode(await sha256(verifierCode));\n\n  const stateCode = cryptoRandomString({ length: 10, type: \"url-safe\" });\n  localStorage.setItem(\"stateCode\", stateCode);\n\n  return `https://accounts.spotify.com/authorize?response_type=code&client_id=${CLIENT_ID}&redirect_uri=${REDIRECT_URI}&code_challenge_method=S256&code_challenge=${challengeCode}&state=${stateCode}&scope=${REQUEST_SCOPES}`;\n};\n\nexport const checkSpotifyTokenAndRefresh = () => {\n  const token = getWithExpiry(\"spotifyToken\");\n\n  if (token) {\n    return token;\n  } else if (getUserAccessToken(GrantType.REFRESH)) {\n    return localStorage.getItem(\"spotifyRefreshToken\");\n  }\n\n  return null;\n};\n\nexport const getUserAccessToken = async (\n  grantType: GrantType,\n  stateResponse?: string,\n  authCode?: string\n): Promise<boolean> => {\n  if (grantType === GrantType.REFRESH) {\n    const spotifyRefreshTokenRequest = {\n      grant_type: grantType,\n      refresh_token: localStorage.getItem(\"spotifyRefreshToken\"),\n      client_id: CLIENT_ID,\n    };\n\n    return fetchTokenFromSpotify(spotifyRefreshTokenRequest);\n  } else if (localStorage.getItem(\"stateCode\") === stateResponse) {\n    const spotifyTokenRequest = {\n      client_id: CLIENT_ID,\n      grant_type: grantType,\n      code: authCode,\n      redirect_uri: REDIRECT_URI,\n      code_verifier: localStorage.getItem(\"verifierCode\"),\n    };\n\n    return await fetchTokenFromSpotify(spotifyTokenRequest);\n  }\n\n  return false;\n};\n\nconst fetchTokenFromSpotify = async (spotifyTokenRequest: {}): Promise<\n  boolean\n> => {\n  const spotifyTokens = await fetch(\"https://accounts.spotify.com/api/token\", {\n    method: \"POST\",\n    body: encodeFormData(spotifyTokenRequest),\n    headers: {\n      \"Content-Type\": \"application/x-www-form-urlencoded\",\n    },\n  });\n\n  const tokens = await spotifyTokens.json();\n  if (tokens.access_token) {\n    setWithExpiry(\"spotifyToken\", tokens.access_token, tokens.expires_in);\n    localStorage.setItem(\"spotifyRefreshToken\", tokens.refresh_token);\n    return true;\n  }\n\n  return false;\n};\n\nconst base64URLEncode = (hash: any): string => {\n  return hash\n    .toString(Base64)\n    .replace(/=/g, \"\")\n    .replace(/\\+/g, \"-\")\n    .replace(/\\//g, \"_\");\n};\n\nconst encodeFormData = (data: any) => {\n  return Object.keys(data)\n    .map((key) => encodeURIComponent(key) + \"=\" + encodeURIComponent(data[key]))\n    .join(\"&\");\n};\ninterface UserToken {\n  access_token: string;\n  refresh_token: string;\n  expires_in: number;\n}\n"],"sourceRoot":""}