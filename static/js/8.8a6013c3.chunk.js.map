{"version":3,"sources":["components/toggle-button/styled-toggle.tsx","assets/images/like.svg","components/top-controls/favourites-options.tsx","components/top-controls/time-range.tsx","components/top-controls/user-icon.tsx","components/top-controls/top-controls.tsx","services/spotify-auth.ts","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js","services/spotify-service.ts"],"names":["StyledToggle","styled","div","props","selected","theme","background","primary","secondary","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","createElement","d","_ref3","_ref4","_ref5","_ref6","_ref7","_ref8","_ref9","_ref10","_ref11","_ref12","_ref13","_ref14","_ref15","_ref16","_ref17","_ref","svgRef","title","id","x","y","viewBox","style","enableBackground","xmlSpace","ref","ForwardRef","forwardRef","FavouritesType","useContext","AppContext","favouritesType","setFavouritesType","FavouritesOptionsContainer","onClick","className","TimeRange","selectedTimeRange","setSelectedTimeRange","handleClick","timeRange","spotifyTopElement","document","querySelector","opacity","setTimeout","TimeRangeContainer","UserIcon","userProfile","setUserProfile","useEffect","display_name","getUserProfile","then","result","StyledUserIcon","src","images","url","alt","href","external_urls","spotify","toLocaleLowerCase","TopControlsContainer","TopControls","GrantType","cryptoRandomString","require","sha256","Base64","REDIRECT_URI","process","CLIENT_ID","spotifyAuthRequestUri","a","verifierCode","type","localStorage","setItem","base64URLEncode","challengeCode","stateCode","checkSpotifyTokenAndRefresh","token","getWithExpiry","getUserAccessToken","REFRESH","getItem","grantType","stateResponse","authCode","spotifyRefreshTokenRequest","grant_type","refresh_token","client_id","fetchTokenFromSpotify","spotifyTokenRequest","code","redirect_uri","code_verifier","fetch","method","body","encodeFormData","headers","spotifyTokens","json","tokens","access_token","setWithExpiry","expires_in","hash","toString","replace","data","map","encodeURIComponent","join","_taggedTemplateLiteral","strings","raw","slice","freeze","defineProperties","value","SPOTIFY_API_URL","getUserTopArtists","limit","spotifyToken","console","log","Authorization","userTopArtistsResults","Promise","reject","getUserTopTracks","userTopTracksResponse","getArtistTopTracks","artistTopTracksResponse","userProfileResponse"],"mappings":"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","file":"static/js/8.8a6013c3.chunk.js","sourcesContent":["import styled from \"styled-components\";\n\nexport const StyledToggle = styled.div<{ selected?: boolean }>`\n  color: ${(props) =>\n    props.selected ? props.theme.background : props.theme.primary};\n  background: ${(props) =>\n    props.selected ? props.theme.secondary : props.theme.background};\n  border: 1px solid ${(props) => props.theme.secondary};\n  padding: 6px;\n  font-weight: 500;\n  cursor: pointer;\n  font-size: 16px;\n  -moz-transition: all 0.2s ease-in;\n  -o-transition: all 0.2s ease-in;\n  -webkit-transition: all 0.2s ease-in;\n  transition: all 0.2s ease-in;\n  pointer-events: ${(props) => (props.selected ? \"none\" : \"auto\")};\n\n  &:hover {\n    color: ${(props) =>\n      props.selected ? props.theme.primary : props.theme.secondary};\n    cursor: ${(props) => (props.selected ? \"default\" : \"pointer\")};\n  }\n  &:active {\n    opacity: ${(props) => (props.selected ? \"1\" : \"0.6\")};\n  }\n`;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M376,30c-27.783,0-53.255,8.804-75.707,26.168c-21.525,16.647-35.856,37.85-44.293,53.268 c-8.437-15.419-22.768-36.621-44.293-53.268C189.255,38.804,163.783,30,136,30C58.468,30,0,93.417,0,177.514 c0,90.854,72.943,153.015,183.369,247.118c18.752,15.981,40.007,34.095,62.099,53.414C248.38,480.596,252.12,482,256,482 s7.62-1.404,10.532-3.953c22.094-19.322,43.348-37.435,62.111-53.425C439.057,330.529,512,268.368,512,177.514 C512,93.417,453.532,30,376,30z\"\n})));\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref6 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref7 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref8 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref9 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref10 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref11 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref12 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref13 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref14 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref15 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref16 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref17 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar SvgLike = function SvgLike(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Capa_1\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 512 512\",\n    style: {\n      enableBackground: \"new 0 0 512 512\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12, _ref13, _ref14, _ref15, _ref16, _ref17);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgLike, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/like.7969a3cf.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useContext } from \"react\";\nimport styled from \"styled-components\";\nimport { AppContext } from \"../../AppContext\";\nimport { StyledToggle } from \"../toggle-button/styled-toggle\";\nimport { ReactComponent as LikeSvg } from \"../../assets/images/like.svg\";\n\nexport const FavouritesType = () => {\n  const { favouritesType, setFavouritesType } = useContext(AppContext);\n\n  return (\n    <FavouritesOptionsContainer>\n      <StyledToggle\n        selected={favouritesType === \"tracks\"}\n        onClick={() => setFavouritesType(\"tracks\")}\n        className=\"styled-toggle\"\n      >\n        Tracks\n        {favouritesType === \"tracks\" && <LikeSvg />}\n      </StyledToggle>\n      <StyledToggle\n        selected={favouritesType === \"artists\"}\n        onClick={() => setFavouritesType(\"artists\")}\n        className=\"styled-toggle\"\n      >\n        Artists\n        {favouritesType === \"artists\" && <LikeSvg />}\n      </StyledToggle>\n    </FavouritesOptionsContainer>\n  );\n};\n\nconst FavouritesOptionsContainer = styled.div`\n  display: flex;\n  align-items: center;\n  max-height: 33px;\n\n  .styled-toggle {\n    display: flex;\n    align-items: center;\n\n    svg {\n      margin-left: 4px;\n      height: 14px;\n    }\n  }\n`;\n","import React, { useContext } from \"react\";\nimport styled from \"styled-components\";\nimport { AppContext } from \"../../AppContext\";\nimport { StyledToggle } from \"../toggle-button/styled-toggle\";\n\nexport const TimeRange = () => {\n  const { selectedTimeRange, setSelectedTimeRange } = useContext(AppContext);\n\n  const handleClick = (timeRange: string) => {\n    const spotifyTopElement = document.querySelector(\n      \".spotify-top\"\n    ) as HTMLDivElement;\n    spotifyTopElement.style.opacity = \"0.2\";\n    setSelectedTimeRange(timeRange);\n    setTimeout(() => {\n      spotifyTopElement.style.opacity = \"1\";\n    }, 500);\n  };\n\n  return (\n    <TimeRangeContainer>\n      <StyledToggle\n        selected={selectedTimeRange === \"short\"}\n        onClick={() => handleClick(\"short\")}\n      >\n        Short\n      </StyledToggle>\n      <StyledToggle\n        selected={selectedTimeRange === \"medium\"}\n        onClick={() => handleClick(\"medium\")}\n      >\n        Medium\n      </StyledToggle>\n      <StyledToggle\n        selected={selectedTimeRange === \"long\"}\n        onClick={() => handleClick(\"long\")}\n      >\n        Long\n      </StyledToggle>\n    </TimeRangeContainer>\n  );\n};\n\nconst TimeRangeContainer = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  color: ${(props) => props.theme.primary};\n  max-height: 33px;\n\n  @media only screen and (max-width: 768px) {\n    flex-direction: column;\n    align-items: flex-end;\n    max-height: unset;\n  }\n`;\n","import React, { useContext, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { AppContext } from \"../../AppContext\";\nimport { getUserProfile } from \"../../services/spotify-service\";\n\nexport const UserIcon = () => {\n  const { userProfile, setUserProfile } = useContext(AppContext);\n\n  useEffect(() => {\n    if (!userProfile.display_name) {\n      getUserProfile().then((result) => setUserProfile(result));\n    }\n  });\n\n  return (\n    <>\n      {userProfile.display_name && (\n        <StyledUserIcon>\n          <img\n            src={userProfile.images && userProfile.images[0] ? userProfile.images[0].url : \"\"}\n            alt=\"profile\"\n          />\n          <a\n            target=\"blank\"\n            href={userProfile.external_urls.spotify}\n            className=\"user-name\"\n          >\n            {userProfile.display_name.toLocaleLowerCase()}\n          </a>\n        </StyledUserIcon>\n      )}\n    </>\n  );\n};\n\nconst StyledUserIcon = styled.div`\n  display: flex;\n  align-items: center;\n  margin-top: 2px;\n  cursor: pointer;\n\n  &:hover {\n    .user-name {\n      color: #fd6500;\n    }\n  }\n\n  img {\n    height: 32px;\n    width: 32px;\n    border-radius: 50%;\n    margin-right: 8px;\n  }\n\n  .user-name {\n    transition: color 0.3s ease-in-out;\n    font-size: 14px;\n    color: white;\n    text-decoration: underline;\n  }\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { FavouritesType } from \"./favourites-options\";\nimport { TimeRange } from \"./time-range\";\nimport { UserIcon } from \"./user-icon\";\n\n\nconst TopControls = () => (\n  <TopControlsContainer>\n    <FavouritesType />\n    <UserIcon />\n    <TimeRange />\n  </TopControlsContainer>\n);\n\nconst TopControlsContainer = styled.div`\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  margin-bottom: 40px;\n`;\n\nexport default TopControls;\n","import { getWithExpiry, setWithExpiry } from \"../util/storage-util\";\n\nconst cryptoRandomString = require(\"crypto-random-string\");\nconst sha256 = require(\"crypto-js/sha256\");\nconst Base64 = require(\"crypto-js/enc-base64\");\n\nconst REDIRECT_URI =\n  process.env.REACT_APP_AUTH_REDIRECT_URI || \"http://localhost:3000/callback\";\nconst CLIENT_ID = \"a3c9a895bbe94102a08574ba4f4adc9e\";\nconst REQUEST_SCOPES = \"user-top-read streaming\";\n\nexport enum GrantType {\n  AUTH = \"authorization_code\",\n  REFRESH = \"refresh_token\",\n}\n\nexport const spotifyAuthRequestUri = async () => {\n  const verifierCode = cryptoRandomString({ length: 48, type: \"url-safe\" });\n  localStorage.setItem(\"verifierCode\", verifierCode);\n\n  const challengeCode = base64URLEncode(await sha256(verifierCode));\n\n  const stateCode = cryptoRandomString({ length: 10, type: \"url-safe\" });\n  localStorage.setItem(\"stateCode\", stateCode);\n\n  return `https://accounts.spotify.com/authorize?response_type=code&client_id=${CLIENT_ID}&redirect_uri=${REDIRECT_URI}&code_challenge_method=S256&code_challenge=${challengeCode}&state=${stateCode}&scope=${REQUEST_SCOPES}`;\n};\n\nexport const checkSpotifyTokenAndRefresh = () => {\n  const token = getWithExpiry(\"spotifyToken\");\n\n  if (token) {\n    return token;\n  } else if (getUserAccessToken(GrantType.REFRESH)) {\n    return localStorage.getItem(\"spotifyRefreshToken\");\n  }\n\n  return null;\n};\n\nexport const getUserAccessToken = async (\n  grantType: GrantType,\n  stateResponse?: string,\n  authCode?: string\n): Promise<boolean> => {\n  if (grantType === GrantType.REFRESH) {\n    const spotifyRefreshTokenRequest = {\n      grant_type: grantType,\n      refresh_token: localStorage.getItem(\"spotifyRefreshToken\"),\n      client_id: CLIENT_ID,\n    };\n\n    return fetchTokenFromSpotify(spotifyRefreshTokenRequest);\n  } else if (localStorage.getItem(\"stateCode\") === stateResponse) {\n    const spotifyTokenRequest = {\n      client_id: CLIENT_ID,\n      grant_type: grantType,\n      code: authCode,\n      redirect_uri: REDIRECT_URI,\n      code_verifier: localStorage.getItem(\"verifierCode\"),\n    };\n\n    return await fetchTokenFromSpotify(spotifyTokenRequest);\n  }\n\n  return false;\n};\n\nconst fetchTokenFromSpotify = async (spotifyTokenRequest: {}): Promise<\n  boolean\n> => {\n  const spotifyTokens = await fetch(\"https://accounts.spotify.com/api/token\", {\n    method: \"POST\",\n    body: encodeFormData(spotifyTokenRequest),\n    headers: {\n      \"Content-Type\": \"application/x-www-form-urlencoded\",\n    },\n  });\n\n  const tokens = await spotifyTokens.json();\n  if (tokens.access_token) {\n    setWithExpiry(\"spotifyToken\", tokens.access_token, tokens.expires_in);\n    localStorage.setItem(\"spotifyRefreshToken\", tokens.refresh_token);\n    return true;\n  }\n\n  return false;\n};\n\nconst base64URLEncode = (hash: any): string => {\n  return hash\n    .toString(Base64)\n    .replace(/=/g, \"\")\n    .replace(/\\+/g, \"-\")\n    .replace(/\\//g, \"_\");\n};\n\nconst encodeFormData = (data: any) => {\n  return Object.keys(data)\n    .map((key) => encodeURIComponent(key) + \"=\" + encodeURIComponent(data[key]))\n    .join(\"&\");\n};\ninterface UserToken {\n  access_token: string;\n  refresh_token: string;\n  expires_in: number;\n}\n","export default function _taggedTemplateLiteral(strings, raw) {\n  if (!raw) {\n    raw = strings.slice(0);\n  }\n\n  return Object.freeze(Object.defineProperties(strings, {\n    raw: {\n      value: Object.freeze(raw)\n    }\n  }));\n}","import { checkSpotifyTokenAndRefresh } from \"./spotify-auth\";\nimport { Artist, Track, UserProfile } from \"./spotify-types\";\n\nconst SPOTIFY_API_URL = \"https://api.spotify.com/v1\";\n\nexport const getUserTopArtists = async (\n  timeRange: string,\n  limit?: number\n): Promise<UserTopArtists> => {\n  const spotifyToken = checkSpotifyTokenAndRefresh();\n  if (spotifyToken) {\n    console.log(`GET ${SPOTIFY_API_URL}/me/top/artists`);\n    const userTopArtistsResults = await fetch(\n      `${SPOTIFY_API_URL}/me/top/artists?time_range=${timeRange}${\n        limit ? `&limit=${limit}` : \"\"\n      }`,\n      {\n        method: \"GET\",\n        headers: {\n          Authorization: `Bearer ${spotifyToken}`,\n        },\n      }\n    );\n\n    return userTopArtistsResults.json();\n  }\n\n  return Promise.reject(\"Invalid spotify auth token :(\");\n};\n\nexport const getUserTopTracks = async (\n  timeRange: string,\n  limit?: number\n): Promise<UserTopTracks> => {\n  const spotifyToken = checkSpotifyTokenAndRefresh();\n  if (spotifyToken) {\n    console.log(`GET ${SPOTIFY_API_URL}/me/top/tracks`);\n    const userTopTracksResponse = await fetch(\n      `${SPOTIFY_API_URL}/me/top/tracks?time_range=${timeRange}${\n        limit ? `&limit=${limit}` : \"\"\n      }`,\n      {\n        method: \"GET\",\n        headers: {\n          Authorization: `Bearer ${spotifyToken}`,\n        },\n      }\n    );\n\n    return userTopTracksResponse.json();\n  }\n\n  return Promise.reject(\"Invalid spotify auth token :(\");\n};\n\nexport const getArtistTopTracks = async (\n  id: string\n): Promise<ArtistTopTracks> => {\n  const spotifyToken = checkSpotifyTokenAndRefresh();\n  if (spotifyToken) {\n    console.log(`GET ${SPOTIFY_API_URL}/artists/${id}/top-tracks`);\n    const artistTopTracksResponse = await fetch(\n      ` ${SPOTIFY_API_URL}/artists/${id}/top-tracks?market=GB`,\n      {\n        method: \"GET\",\n        headers: {\n          Authorization: `Bearer ${spotifyToken}`,\n        },\n      }\n    );\n\n    return artistTopTracksResponse.json();\n  }\n\n  return Promise.reject(\"Invalid spotify auth token :(\");\n};\n\nexport const getUserProfile = async (): Promise<UserProfile> => {\n  const spotifyToken = checkSpotifyTokenAndRefresh();\n  if (spotifyToken) {\n    console.log(`GET ${SPOTIFY_API_URL}/me`);\n    const userProfileResponse = await fetch(` ${SPOTIFY_API_URL}/me`, {\n      method: \"GET\",\n      headers: {\n        Authorization: `Bearer ${spotifyToken}`,\n      },\n    });\n\n    return userProfileResponse.json();\n  }\n\n  return Promise.reject(\"Invalid spotify auth token :(\");\n};\n\ninterface UserTopArtists {\n  items: Array<Artist>;\n}\n\ninterface UserTopTracks {\n  items: Array<Track>;\n}\n\ninterface ArtistTopTracks {\n  tracks: Array<Track>;\n}\n"],"sourceRoot":""}