(this["webpackJsonpspotify-favourites"]=this["webpackJsonpspotify-favourites"]||[]).push([[6],{109:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var r=n(0),a=n.n(r);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=a.a.createElement("g",null,a.a.createElement("path",{d:"M34.857,3.613C20.084-4.861,8.107,2.081,8.107,19.106v125.637c0,17.042,11.977,23.975,26.75,15.509L144.67,97.275 c14.778-8.477,14.778-22.211,0-30.686L34.857,3.613z"})),u=a.a.createElement("g",null),i=a.a.createElement("g",null),s=a.a.createElement("g",null),f=a.a.createElement("g",null),p=a.a.createElement("g",null),d=a.a.createElement("g",null),m=a.a.createElement("g",null),v=a.a.createElement("g",null),g=a.a.createElement("g",null),y=a.a.createElement("g",null),b=a.a.createElement("g",null),h=a.a.createElement("g",null),E=a.a.createElement("g",null),O=a.a.createElement("g",null),_=a.a.createElement("g",null),w=function(e){var t=e.svgRef,n=e.title,r=o(e,["svgRef","title"]);return a.a.createElement("svg",c({id:"Capa_1",x:"0px",y:"0px",width:"163.861px",height:"163.861px",viewBox:"0 0 163.861 163.861",style:{enableBackground:"new 0 0 163.861 163.861"},xmlSpace:"preserve",ref:t},r),n?a.a.createElement("title",null,n):null,l,u,i,s,f,p,d,m,v,g,y,b,h,E,O,_)},k=a.a.forwardRef((function(e,t){return a.a.createElement(w,c({svgRef:t},e))}));n.p},110:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var r=n(0),a=n.n(r);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=a.a.createElement("g",null,a.a.createElement("g",null,a.a.createElement("path",{d:"M256,0C114.615,0,0,114.615,0,256s114.615,256,256,256s256-114.615,256-256S397.385,0,256,0z M230.4,358.4 c0,14.138-11.462,25.6-25.6,25.6h-25.6c-14.138,0-25.6-11.461-25.6-25.6V153.6c0-14.139,11.461-25.6,25.6-25.6h25.6 c14.138,0,25.6,11.461,25.6,25.6V358.4z M358.4,358.4c0,14.138-11.462,25.6-25.6,25.6h-25.6c-14.138,0-25.6-11.461-25.6-25.6 V153.6c0-14.139,11.461-25.6,25.6-25.6h25.6c14.138,0,25.6,11.461,25.6,25.6V358.4z"}))),u=a.a.createElement("g",null),i=a.a.createElement("g",null),s=a.a.createElement("g",null),f=a.a.createElement("g",null),p=a.a.createElement("g",null),d=a.a.createElement("g",null),m=a.a.createElement("g",null),v=a.a.createElement("g",null),g=a.a.createElement("g",null),y=a.a.createElement("g",null),b=a.a.createElement("g",null),h=a.a.createElement("g",null),E=a.a.createElement("g",null),O=a.a.createElement("g",null),_=a.a.createElement("g",null),w=function(e){var t=e.svgRef,n=e.title,r=o(e,["svgRef","title"]);return a.a.createElement("svg",c({id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{enableBackground:"new 0 0 512 512"},xmlSpace:"preserve",ref:t},r),n?a.a.createElement("title",null,n):null,l,u,i,s,f,p,d,m,v,g,y,b,h,E,O,_)},k=a.a.forwardRef((function(e,t){return a.a.createElement(w,c({svgRef:t},e))}));n.p},267:function(e,t,n){},270:function(e,t,n){"use strict";n.r(t);var r=n(87),a=n(0),c=n.n(a),o=n(42),l=n(81),u=n(56),i=n(109),s=n(110);function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var d=c.a.createElement("g",null,c.a.createElement("g",null,c.a.createElement("path",{d:"M256,0C114.837,0,0,114.837,0,256s114.837,256,256,256s256-114.837,256-256S397.163,0,256,0z M335.083,271.083 L228.416,377.749c-4.16,4.16-9.621,6.251-15.083,6.251c-5.461,0-10.923-2.091-15.083-6.251c-8.341-8.341-8.341-21.824,0-30.165 L289.835,256l-91.584-91.584c-8.341-8.341-8.341-21.824,0-30.165s21.824-8.341,30.165,0l106.667,106.667 C343.424,249.259,343.424,262.741,335.083,271.083z"}))),m=c.a.createElement("g",null),v=c.a.createElement("g",null),g=c.a.createElement("g",null),y=c.a.createElement("g",null),b=c.a.createElement("g",null),h=c.a.createElement("g",null),E=c.a.createElement("g",null),O=c.a.createElement("g",null),_=c.a.createElement("g",null),w=c.a.createElement("g",null),k=c.a.createElement("g",null),j=c.a.createElement("g",null),x=c.a.createElement("g",null),S=c.a.createElement("g",null),R=c.a.createElement("g",null),P=function(e){var t=e.svgRef,n=e.title,r=p(e,["svgRef","title"]);return c.a.createElement("svg",f({id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{enableBackground:"new 0 0 512 512"},xmlSpace:"preserve",ref:t},r),n?c.a.createElement("title",null,n):null,d,m,v,g,y,b,h,E,O,_,w,k,j,x,S,R)},C=c.a.forwardRef((function(e,t){return c.a.createElement(P,f({svgRef:t},e))})),T=(n.p,n(267),function(){var e,t,n,r,o,f,p,d,m,v,g,y,b=Object(a.useContext)(u.a).spotifyPlayerState,h=!(null===b||void 0===b?void 0:b.paused),E=null===b||void 0===b||null===(e=b.track_window)||void 0===e||null===(t=e.current_track)||void 0===t||null===(n=t.album)||void 0===n||null===(r=n.images[0])||void 0===r?void 0:r.url,O=null===b||void 0===b||null===(o=b.track_window)||void 0===o||null===(f=o.previous_tracks[0])||void 0===f||null===(p=f.album)||void 0===p||null===(d=p.images[0])||void 0===d?void 0:d.url,_=null===b||void 0===b||null===(m=b.track_window)||void 0===m||null===(v=m.next_tracks[0])||void 0===v||null===(g=v.album)||void 0===g||null===(y=g.images[0])||void 0===y?void 0:y.url;return c.a.createElement("div",{className:"player"},c.a.createElement("div",{className:"player__previous",onClick:l.e},c.a.createElement("div",{className:"player__previous__btn"},c.a.createElement(C,null)),O&&c.a.createElement("img",{src:O,alt:"previous-track"})),c.a.createElement("div",{className:"player__current",onClick:function(){h?Object(l.b)():Object(l.c)()}},c.a.createElement("div",{className:"player__current__play"},h?c.a.createElement(s.a,null):c.a.createElement(i.a,null)),E&&c.a.createElement("img",{src:E,alt:"current-track"})),c.a.createElement("div",{className:"player__next",onClick:l.a},c.a.createElement("div",{className:"player__next__btn"},c.a.createElement(C,null)),_&&c.a.createElement("img",{src:_,alt:"next-track"})))}),I=function(){var e=document.createElement("script");return e.async=!0,e.src="https://sdk.scdn.co/spotify-player.js",document.body.appendChild(e),e};t.default=function(){var e=Object(a.useContext)(u.a),t=e.setDeviceId,n=e.setSpotifyPlayerState,i=e.trackHistory,s=e.setTrackHistory;return Object(a.useEffect)((function(){var e=I();return window.onSpotifyWebPlaybackSDKReady=function(){var e=Object(o.b)(),a=new Spotify.Player({name:"Spotify Favourites Web Player",getOAuthToken:function(t){t(e)}});a.addListener("initialization_error",(function(e){var t=e.message;console.error(t)})),a.addListener("authentication_error",(function(e){var t=e.message;console.error(t)})),a.addListener("account_error",(function(e){var t=e.message;console.error(t)})),a.addListener("playback_error",(function(e){var t=e.message;console.error(t)})),a.addListener("player_state_changed",(function(e){var t;console.log(e),n(e),function(e){console.log("trackHistory ",i);var t=Object(r.a)(i);console.log("newTrackHistory ",t);var n=!1;i.forEach((function(t){t.uri===e.uri&&(n=!0)})),n||(t.push(e),s(t))}(null===e||void 0===e||null===(t=e.track_window)||void 0===t?void 0:t.current_track)})),a.addListener("ready",(function(e){var n=e.device_id;console.log("Ready with Device ID",n),Object(l.f)(n),t(n)})),a.addListener("not_ready",(function(e){var t=e.device_id;console.log("Device ID has gone offline",t)})),a.connect()},function(){document.body.removeChild(e)}}),[]),c.a.createElement(T,null)}},42:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return d})),n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return v}));var r,a=n(43),c=n.n(a),o=n(45),l=n(49),u=n(57),i=n(78),s=n(79),f="https://rowsim.github.io/spotify-favourites/callback",p="a3c9a895bbe94102a08574ba4f4adc9e";!function(e){e.AUTH="authorization_code",e.REFRESH="refresh_token"}(r||(r={}));var d=function(){var e=Object(o.a)(c.a.mark((function e(){var t,n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u({length:48,type:"url-safe"}),localStorage.setItem("verifierCode",t),e.t0=y,e.next=5,i(t);case 5:return e.t1=e.sent,n=(0,e.t0)(e.t1),r=u({length:10,type:"url-safe"}),localStorage.setItem("stateCode",r),e.abrupt("return","https://accounts.spotify.com/authorize?response_type=code&client_id=".concat(p,"&redirect_uri=").concat(f,"&code_challenge_method=S256&code_challenge=").concat(n,"&state=").concat(r,"&scope=").concat("user-top-read streaming"));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(l.a)("spotifyToken");return e||(v(r.REFRESH)?localStorage.getItem("spotifyRefreshToken"):null)},v=function(){var e=Object(o.a)(c.a.mark((function e(t,n,a){var o,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==r.REFRESH){e.next=5;break}return o={grant_type:t,refresh_token:localStorage.getItem("spotifyRefreshToken"),client_id:p},e.abrupt("return",g(o));case 5:if(localStorage.getItem("stateCode")!==n){e.next=10;break}return l={client_id:p,grant_type:t,code:a,redirect_uri:f,code_verifier:localStorage.getItem("verifierCode")},e.next=9,g(l);case 9:return e.abrupt("return",e.sent);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),g=function(){var e=Object(o.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://accounts.spotify.com/api/token",{method:"POST",body:b(t),headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 2:return n=e.sent,e.next=5,n.json();case 5:if(!(r=e.sent).access_token){e.next=10;break}return Object(l.b)("spotifyToken",r.access_token,r.expires_in),localStorage.setItem("spotifyRefreshToken",r.refresh_token),e.abrupt("return",!0);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(e){return e.toString(s).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},b=function(e){return Object.keys(e).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&")}},60:function(e,t){},61:function(e,t){},64:function(e,t){},65:function(e,t){},67:function(e,t){},68:function(e,t){},69:function(e,t){},70:function(e,t){},71:function(e,t){},73:function(e,t){},74:function(e,t){},76:function(e,t){},77:function(e,t){},81:function(e,t,n){"use strict";n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return f})),n.d(t,"e",(function(){return p})),n.d(t,"f",(function(){return d}));var r=n(43),a=n.n(r),c=n(45),o=n(42),l="https://api.spotify.com/v1/me/player",u=function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(o.b)(),fetch("".concat(l,"/play"),{method:"PUT",headers:{Authorization:"Bearer ".concat(n)},body:JSON.stringify({uris:t})});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object(o.b)(),fetch("".concat(l,"/play"),{method:"PUT",headers:{Authorization:"Bearer ".concat(t)}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object(o.b)(),fetch("".concat(l,"/pause"),{method:"PUT",headers:{Authorization:"Bearer ".concat(t)}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object(o.b)(),fetch("".concat(l,"/next"),{method:"POST",headers:{Authorization:"Bearer ".concat(t)}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object(o.b)(),fetch("".concat(l,"/previous"),{method:"POST",headers:{Authorization:"Bearer ".concat(t)}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,c=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=c.length>1&&void 0!==c[1]&&c[1],r=Object(o.b)(),fetch(l,{method:"PUT",headers:{Authorization:"Bearer ".concat(r)},body:JSON.stringify({device_ids:[t],play:n})});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},87:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(11);var a=n(17);function c(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(a.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}}]);
//# sourceMappingURL=6.c4230cdf.chunk.js.map